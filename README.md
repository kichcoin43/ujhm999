# BNAL Bank - финансовая платформа

## Обзор приложения

BNAL Bank - это многофункциональная финансовая платформа, которая объединяет традиционные банковские услуги с криптовалютными инструментами. Приложение разработано с использованием современных технологий и обеспечивает безопасное управление финансовыми активами.

## Основные функции

- **Банковские карты**: управление валютными и криптовалютными картами
- **Переводы**: возможность отправлять и получать средства в разных валютах
- **Обмен валют**: конвертация между фиатными и криптовалютами
- **Аналитика**: отслеживание курсов валют и финансовой статистики
- **Telegram интеграция**: доступ к приложению через Telegram бота

## Технический стек

- **Фронтенд**: React, TypeScript, Tailwind CSS, shadcn/ui
- **Бэкенд**: Node.js, Express
- **База данных**: SQLite (с поддержкой PostgreSQL)
- **Аутентификация**: Passport.js, express-session
- **API**: REST, WebSockets для обновления курсов валют
- **Криптовалюты**: bitcoinjs-lib, ethers.js
- **Интеграции**: Telegram Bot API

## Деплой на Render.com

Директория `render-app` содержит все необходимые файлы для деплоя приложения на Render.com. Подробная инструкция по деплою описана в файле [RENDER_DEPLOYMENT_GUIDE.md](RENDER_DEPLOYMENT_GUIDE.md).

### Ключевые файлы для деплоя

- `build.sh` - скрипт сборки приложения
- `start.sh` - скрипт запуска приложения
- `setup-telegram.js` - скрипт настройки Telegram бота
- `check-status.sh` - скрипт проверки статуса приложения
- `render.yaml` - конфигурационный файл для Render.com

### Резервное копирование и восстановление данных

Информация о процедурах резервного копирования и восстановления данных находится в файле [DATABASE_BACKUP_RESTORE.md](DATABASE_BACKUP_RESTORE.md).

## Переменные окружения

Для корректной работы приложения необходимо установить следующие переменные окружения:

- `NODE_ENV` - окружение (development/production)
- `RENDER` - флаг для определения, что приложение запущено на Render.com (true/false)
- `TELEGRAM_BOT_TOKEN` - токен Telegram бота
- `SESSION_SECRET` - секрет для шифрования сессий
- `WEBAPP_URL` - URL приложения (автоматически устанавливается на Render.com)

## Важные особенности

### Постоянное хранилище

На Render.com для хранения базы данных и резервных копий используется постоянное хранилище (disk), которое монтируется в директорию `/data`. Приложение автоматически создает необходимые поддиректории при первом запуске.

### Telegram бот

В production режиме Telegram бот работает через webhook, что обеспечивает мгновенную обработку сообщений. URL для webhook автоматически настраивается при запуске приложения на основе `RENDER_EXTERNAL_URL`.

### Автоматическое резервное копирование

Приложение автоматически создает резервные копии базы данных при запуске и с заданной периодичностью. Резервные копии хранятся в директории `/data/backup`.

## Дополнительные скрипты

- `prepare-deployment.js` - скрипт для проверки готовности проекта к деплою

## Поддержка

При возникновении проблем с деплоем или работой приложения, обратитесь к документации или создайте issue в репозитории проекта.